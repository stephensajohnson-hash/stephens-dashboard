<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stephens' Dashboard V0.2</title>
    <!-- Load Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apply smooth transitions to all interactive elements */
        * {
            transition: all 0.2s ease-in-out;
        }
        /* Custom scrollbar for a polished dark-mode look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111827; /* gray-900 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4B5563; /* gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6B7280; /* gray-500 */
        }

        /* Set default font to Inter */
        html {
            font-family: 'Inter', sans-serif;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<!-- Main container is set to dark mode -->
<body class="bg-gray-900 text-white min-h-screen p-4 sm:p-8">

    <!-- Header -->
    <header class="mb-10 pt-4 text-center">
        <h1 class="text-5xl font-extrabold text-blue-400 tracking-tight mb-2">
            Stephens' Dashboard <span class="text-gray-300">V0.2</span>
        </h1>
        <p class="text-lg text-gray-400">Your quick-access portal for work, fun, and life.</p>
    </header>

    <!-- Dashboard Content Container (FLEX WRAP for non-uniform layout) -->
    <!-- Groups will wrap and take up max-w-sm of space, creating the desired flow -->
    <main id="dashboard-container" class="flex flex-wrap justify-center gap-6 max-w-7xl mx-auto">
        <!-- A simple loading indicator -->
        <p id="loading-indicator" class="col-span-full text-center text-gray-400 p-8">Loading dashboard data...</p>
    </main>

    <!-- JavaScript for Data Handling and Rendering -->
    <script>
        const container = document.getElementById('dashboard-container');

        // --- EMBEDDED DATA FOR PREVIEW/FALLBACK (Identified by '(test)' in names) ---
        const EMBEDDED_DATA = {
            "linkGroups": [
                {
                    "name": "PBFCM (test)",
                    "color": "bg-blue-600/20",
                    "textColor": "text-blue-400",
                    "links": [
                        {"name": "Halo", "url": "https://pbfcm.haloitsm.com", "img": "https://media.licdn.com/dms/image/v2/D4D0BAQHua1QvehlNJg/company-logo_200_200/company-logo_200_200/0/1719256595420/haloitsm_logo?e=1764806400&v=beta&t=Et1KWvi52D9xGj68eE4JmapbZ0fg84N4t9c-aheyINs"},
                        {"name": "2025 Bullet Journal", "url": "https://docs.google.com/document/d/1Y2TbxiLuN7K55mL2o_XWDWiTD_bQ8HJLfXjXwEc5m44/edit?tab=t.0#heading=h.clgrn99mtopn", "img": "https://cmsv2-assets.apptegy.net/uploads/11435/file/1077963/28e381d9-b33c-4d9c-b92e-164b4ea08c07.png"},
                        {"name": "Dayforce", "url": "https://us251.dayforcehcm.com/MyDayforce/u/Iw_6iFiF-0SPEmVMNfEh7A/Common/#SHViPyZpc0ZpcnN0RmVhdHVyZT10cnVl", "img": "https://play-lh.googleusercontent.com/GzXqzEjylw9Y2FQPvsw34DcYirDrItkNGYInKrkLg-mFP-cgLYmwF223kA67KlD2miU=s256-rw"},
                        {"name": "3CX", "url": "https://pbfcm.businessphone.com/#/chat/9059", "img": "https://cdn-1.carierista.com/companies/150/2d05df55a3399d793cfbd01657052b4d.png"},
                        {"name": "Udemy", "url": "https://pbfcm.udemy.com/organization/home/", "img": "https://images.seeklogo.com/logo-png/40/1/udemy-wordmark-logo-png_seeklogo-409220.png"}
                    ]
                },
                {
                    "name": "Fun (test)",
                    "color": "bg-amber-600/20",
                    "textColor": "text-amber-400",
                    "links": [
                        {"name": "TikTok", "url": "https://www.tiktok.com/@jaspynj", "img": "https://images.seeklogo.com/logo-png/37/1/tiktok-app-icon-logo-png_seeklogo-373800.png"},
                        {"name": "Facebook", "url": "https://www.facebook.com/", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Facebook_logo_%28square%29.png/960px-Facebook_logo_%28square%29.png"},
                        {"name": "Duolingo", "url": "https://www.duolingo.com", "img": "https://images.seeklogo.com/logo-png/45/2/duolingo-logo-png_seeklogo-458347.png"},
                        {"name": "Instapaper", "url": "http://instapaper.com", "img": "https://play-lh.googleusercontent.com/uQElx_kgheNkInfRZl6_iPZ34HLOpt1KMOiVWmcN_PZFRQ66Ug3vDaAS0eymjsok7g"},
                        {"name": "FFL", "url": "https://ultimateffl.xyz", "img": "https://www.thebiline.com/wp-content/uploads/2023/11/fantasyFootball.png"},
                        {"name": "Royal Caribbean", "url": "https://www.royalcaribbean.com", "img": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwdd2L_gTZtJM7N_K5OpKk5SlqKflxBddeQQ&s"}
                    ]
                },
                {
                    "name": "Google Apps (test)",
                    "color": "bg-green-600/20",
                    "textColor": "text-green-400",
                    "links": [
                        {"name": "Gmail", "url": "https://www.gmail.com", "img": "https://icons.iconarchive.com/icons/marcus-roberto/google-play/256/Gmail-icon.png"},
                        {"name": "Google News", "url": "https://news.google.com/foryou?hl=en-US&gl=US&ceid=US%3Aen", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Google_News_icon.svg/120px-Google_News_icon.svg.png"},
                        {"name": "Drive", "url": "https://drive.google.com", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Google_Drive_icon_%282020%29.svg/120px-Google_Drive_icon_%282020%29.svg.png"},
                        {"name": "Keep", "url": "http://keep.google.com", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/Google_Keep_icon_%282015-2020%29.svg/512px-Google_Keep_icon_%282015-2020%29.svg.png?20210606170001"},
                        {"name": "Calendar", "url": "https://www.google.com/calendar/", "img": "https://ssl.gstatic.com/calendar/images/dynamiclogo_2020q4/calendar_13_2x.png"},
                        {"name": "Contacts", "url": "https://contacts.google.com/#contacts", "img": "https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/google-contacts.svg"},
                        {"name": "YouTube", "url": "https://www.youtube.com", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/512px-YouTube_full-color_icon_%282017%29.svg.png?20240107144800"},
                        {"name": "YouTube Music", "url": "https://music.youtube.com", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Youtube_Music_icon.svg/512px-Youtube_Music_icon.svg.png"},
                        {"name": "YouTube TV", "url": "https://tv.youtube.com", "img": "https://images.seeklogo.com/logo-png/61/2/youtube-tv-logo-png_seeklogo-612184.png"},
                        {"name": "Photos", "url": "https://photos.google.com", "img": "https://images.seeklogo.com/logo-png/26/1/google-photos-logo-png_seeklogo-269651.png"},
                        {"name": "Messages", "url": "https://messages.android.com", "img": "https://play-lh.googleusercontent.com/9AZOTXU_CpreTFAXUPAmJNkm8VGCb1C90fjJ9pHGcVmpGMDSTq3cUbaQJdBT9Tdp9A=w240-h480-rw"}
                    ]
                },
                {
                    "name": "Movies & TV (test)",
                    "color": "bg-purple-600/20",
                    "textColor": "text-purple-400",
                    "links": [
                        {"name": "IMDb", "url": "https://www.imdb.com/", "img": "https://jeremyirons.net/wp-content/uploads/2009/01/imdb-logo-23962421_std.jpg"},
                        {"name": "TV Time", "url": "https://www.tvtime.com/en", "img": "https://upload.wikimedia.org/wikipedia/commons/3/33/TVShow_Time_logo.png?20160620170449"},
                        {"name": "Movies Portal", "url": "https://movies.do", "img": "https://placehold.co/60x60/1E40AF/FFFFFF?text=MP"},
                        {"name": "Bright Star Cinemas", "url": "https://www.brightstarcinemas.com/", "img": "https://placehold.co/60x60/8B5CF6/FFFFFF?text=BSC"},
                        {"name": "YouTube", "url": "https://www.youtube.com", "img": "https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/512px-YouTube_full-color_icon_%282017%29.svg.png?20240107144800"},
                        {"name": "YouTube TV", "url": "https://tv.youtube.com", "img": "https://images.seeklogo.com/logo-png/61/2/youtube-tv-logo-png_seeklogo-612184.png"}
                    ]
                },
                {
                    "name": "Shopping (test)",
                    "color": "bg-pink-600/20",
                    "textColor": "text-pink-400",
                    "links": [
                        {"name": "Amazon", "url": "https://amazon.com", "img": "https://images.seeklogo.com/logo-png/40/2/amazon-icon-logo-png_seeklogo-405254.png"},
                        {"name": "Walmart", "url": "http://www.walmart.com/", "img": "https://www.designmantic.com/blog/wp-content/uploads/2025/02/Walmart-Logo-Icon.png"},
                        {"name": "Black Friday", "url": "http://blackfriday.com/", "img": "https://images.seeklogo.com/logo-png/39/1/black-friday-logo-png_seeklogo-391204.png"}
                    ]
                },
                {
                    "name": "Financial (test)",
                    "color": "bg-emerald-600/20",
                    "textColor": "text-emerald-400",
                    "links": [
                        {"name": "Alliance Bank", "url": "https://alliancebank.com", "img": "https://www.ssnewstelegram.com/sites/ssnewstelegram.com/files/styles/article_420/public/2020-03/xVBU_UXM.png?itok=XpQwRzsj"},
                        {"name": "2025 Budget", "url": "https://docs.google.com/spreadsheets/d/1o3Ab6q4nMFVZIzxM-6lDXCd6jFt-nhHtT5b1yAKgUkw", "img": "https://cmsv2-assets.apptegy.net/uploads/11435/file/1077963/28e381d9-b33c-4d9c-b92e-164b4ea08c07.png"},
                        {"name": "Big Money", "url": "https://docs.google.com/spreadsheets/d/17aFT-1c1eZgnvKkHnw8oS2SQzbTh3JnacRS3ChaW9dM/edit?gid=1898418506#gid=1898418506", "img": "https://cmsv2-assets.apptegy.net/uploads/11435/file/1077963/28e381d9-b33c-4d9c-b92e-164b4ea08c07.png"},
                        {"name": "Mega Millions", "url": "https://www.megamillions.com", "img": "https://scontent-dfw5-1.xx.fbcdn.net/v/t39.30808-1/300760619_575966844316568_8359561060352066869_n.png?stp=dst-png_s200x200&_nc_cat=111&ccb=1-7&_nc_sid=2d3e12&_nc_ohc=WBYVKDTj94sQ7kNvwEs4nvR&_nc_oc=AdnmO7Gyl6SerauVZ5yRbG_eNyM2iBM6eKmTAgYtEw2nNpcYsGZXDZs0y18djU8jMUs&_nc_zt=24&_nc_ht=scontent-dfw5-1.xx&_nc_gid=BgDoOuidjtlK_5YJgnN6Cg&oh=00_AfgrMHw4q6LdO16nh7RgdD67C9iqbsqdAbHVXZk76VAmlw&oe=691C4846"},
                        {"name": "Power Ball", "url": "https://www.powerball.com/games/home", "img": "https://simublast.com/assets/images/lottery/us-powerball.png"},
                        {"name": "Book Sales", "url": "https://kdp.amazon.com/en_US/", "img": "https://wallpapers.com/images/high/amazon-app-icon-0vxsqxaqsv2hidrm.png"},
                        {"name": "Realtor", "url": "http://www.realtor.com", "img": "https://hooquest.com/wp-content/uploads/2018/09/realtor-com-logo-300.png"}
                    ]
                },
                {
                    "name": "Benefits (test)",
                    "color": "bg-teal-600/20",
                    "textColor": "text-teal-400",
                    "links": [
                        {"name": "BCBS", "url": "https://mybam.bcbstx.com", "img": "https://play-lh.googleusercontent.com/EQb_e3MXfOxRvT2U_orh3iV-9z_GvgJFUyn0qfYPlcNDHXCKnW04tMqPLbp4EfjCP8w=w240-h480-rw"},
                        {"name": "MyChart", "url": "https://mychart.christushealth.org/mychart/Authentication/Login?postloginurl=Clinical%2fTestResults", "img": "https://news.med.virginia.edu/files/2023/12/MyChart-1x1-1-200x200.jpg"},
                        {"name": "BCBS Vision", "url": "https://member.eyemedvisioncare.com/bcbstx/en-us/", "img": "https://www.bcbsil.com/content/bcbs-v2/public-sites/bcbsil/en/home/welcome/shop-plans/vision-insurance/_jcr_content/root/main-par/section_252757724_co/section-par/horizontal_value_pro/value-prop-one/image.coreimg.svg/1743113970660/circle-eye-glasses-icon.svg"},
                        {"name": "HSA Bank", "url": "https://account.hsabank.com/#/", "img": "https://media.licdn.com/dms/image/v2/D4E22AQG0tY8-IPbPAQ/feedshare-shrink_800/B4EZTXDi.1GYAg-/0/1738774819262?e=1764806400&v=beta&t=S0Rvm5Ve8gQ7zjOjiLHHnd9zMVS3YSbmC4qeWM6zJfg"},
                        {"name": "Aflac", "url": "https://myaflac.aflac.com/home", "img": "https://cdn.brandfetch.io/idfLaxzY-K/w/400/h/400/theme/dark/icon.png?c=1bxid64Mup7aczewSAYMX&t=1667924267088"},
                        {"name": "Fidelity", "url": "https://login.fidelity.com/ftgw/Fidelity/RtlCust/Login/Init?AuthRedUrl=https://oltx.fidelity.com/ftgw/fbc/ofpositions/brokerageAccountPositions", "img": "https://cdn.brandfetch.io/idzIUUVEBm/w/400/h/400/theme/dark/icon.jpeg?c=1bxid64Mup7aczewSAYMX&t=1752030331882"}
                    ]
                },
                {
                    "name": "Coding (test)",
                    "color": "bg-blue-600/20",
                    "textColor": "text-blue-400",
                    "links": [
                        {"name": "Vercel", "url": "https://vercel.com/stephensajohnson-hashs-projects/stephens-dashboard", "img": "https://pnghdpro.com/wp-content/themes/pnghdpro/download/social-media-and-brands/vercel-logo-icon.png"},
                        {"name": "GitHub", "url": "https://github.com/stephensajohnson-hash/stephens-dashboard/tree/main/dashboard", "img": "https://cdn.iconscout.com/icon/free/png-512/free-github-logo-icon-svg-download-png-8630395.png?f=webp&w=256"}
                    ]
                }
            ]
        };
        // --- END EMBEDDED DATA ---


        // Function to create an individual link tile
        function createLinkElement(link) {
            const linkTile = document.createElement('a');
            linkTile.href = link.url;
            linkTile.target = '_blank';
            
            // Set up placeholder image if URL fails (or if it's a local file like /images/...)
            const placeholderLetter = link.name.substring(0, 1).toUpperCase();
            
            // Image is now roughly 96x96 (w-full of its parent) and uses rounded-xl
            const imgHtml = `
                <div class="w-full h-full aspect-square flex items-center justify-center bg-gray-900 rounded-xl overflow-hidden shadow-inner">
                    <img
                        src="${link.img}"
                        alt="${link.name} icon"
                        class="w-full h-full object-cover p-1 rounded-xl"
                        loading="lazy"
                        onerror="this.onerror=null;this.src='https://placehold.co/96x96/1F2937/FFFFFF?text=${placeholderLetter}'; this.className='p-4';"
                    />
                </div>
            `;

            // New classes for the vertical icon/label structure
            linkTile.className = 'flex flex-col items-center p-2 text-center text-gray-200 bg-gray-800 rounded-xl hover:bg-gray-700 hover:scale-[1.05] active:scale-[0.98] transform shadow-lg transition duration-150 ease-in-out h-full justify-start';
            linkTile.innerHTML = imgHtml + `<span class="mt-2 text-sm font-medium truncate w-full">${link.name}</span>`;
            
            return linkTile;
        }

        /**
         * Renders the dashboard content based on the fetched data.
         * @param {Object} data - The parsed JSON object containing linkGroups.
         * @param {boolean} isFallback - True if embedded data is being used.
         */
        function renderDashboard(data, isFallback) {
            // Clear the loading message or previous content
            container.innerHTML = ''; 

            if (!data.linkGroups || data.linkGroups.length === 0) {
                container.innerHTML = '<p class="text-gray-500 col-span-full text-center">No link groups found in data.</p>';
                return;
            }

            // Display a notification if fallback data is being used
            if (isFallback) {
                const fallbackNote = document.createElement('div');
                fallbackNote.className = 'col-span-full bg-yellow-900/20 border border-yellow-700 text-yellow-400 p-3 rounded-xl text-center mb-6 w-full';
                fallbackNote.textContent = 'NOTICE: Using embedded (test) data. The external data.json failed to load (expected in preview environment).';
                container.appendChild(fallbackNote);
            }

            data.linkGroups.forEach(group => {
                // Create the card container for the group
                const groupCard = document.createElement('div');
                // Use max-w-sm and w-full to allow for the groups to wrap freely
                groupCard.className = 'group-card bg-gray-800 border border-gray-700 rounded-2xl p-4 shadow-xl w-full max-w-sm';

                // Create the header
                const header = document.createElement('div');
                // Use the provided color/textColor classes for the header badge
                const headerClasses = `inline-block px-3 py-1 mb-4 rounded-full text-sm font-semibold ${group.color} ${group.textColor}`;
                header.innerHTML = `<h2 class="${headerClasses}">${group.name}</h2>`;

                // Create the links grid (3 columns inside the card)
                const linksGrid = document.createElement('div');
                linksGrid.className = 'grid grid-cols-3 gap-3';

                // Add links to the grid
                if (group.links && group.links.length > 0) {
                    group.links.forEach(link => {
                        const linkElement = createLinkElement(link);
                        linksGrid.appendChild(linkElement);
                    });
                } else {
                    const emptyMessage = document.createElement('p');
                    emptyMessage.className = 'text-gray-500 text-sm italic col-span-3';
                    emptyMessage.textContent = 'No links in this group.';
                    linksGrid.appendChild(emptyMessage);
                }

                // Append everything to the card and the card to the container
                groupCard.appendChild(header);
                groupCard.appendChild(linksGrid);
                container.appendChild(groupCard);
            });
        }


        /**
         * Initializes the dashboard by trying to fetch the external data,
         * or falling back to the embedded data on failure.
         */
        async function initDashboard() {
            let dashboardData = EMBEDDED_DATA;
            let isFallback = true;
            
            try {
                // Try to fetch the external data file
                const response = await fetch('./data.json');
                
                if (response.ok) {
                    // Success! Use the fetched data
                    dashboardData = await response.json();
                    isFallback = false;
                    console.log('Successfully loaded external data.json.');
                } else {
                    // Fetch succeeded but returned non-OK status (e.g., 404)
                    console.warn(`External data.json returned status ${response.status}. Falling back to embedded data.`);
                }
            } catch (error) {
                // Fetch failed (e.g., URL parsing error in preview, network error)
                console.error('Failed to fetch external data.json:', error.message);
                console.warn('Falling back to embedded test data.');
            }

            // Render the dashboard using the determined data source
            renderDashboard(dashboardData, isFallback);
        }

        // Run the initialization function when the window loads
        window.onload = initDashboard;
    </script>

</body>
</html>
